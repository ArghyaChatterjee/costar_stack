<launch>

  <arg name="gripper_ip_address" default="172.31.1.146"/>
  <arg name="sim" default="false"/>
  <arg name="start_semi_static" default="false"/>
  <arg name="start_camera" default="true"/>
  <arg name="start_move_group" default="true"/>

  <param name="ee_frame" value="iiwa_link_ee"/>
  <param name="base_frame" value="iiwa_link_0"/>

  <include file="$(find costar_bringup)/launch/utilities.launch"/>

  <!--<include if="$(arg sim)" file="$(find iiwa_moveit)/-->

  <include if="$(arg sim)" file="$(find simple_iiwa_driver)/launch/simple_iiwa_driver.launch">
    <remap from="/joint_states" to="/iiwa/joint_states"/>
  </include>
  <include unless="$(arg sim)" file="$(find simple_iiwa_driver)/launch/simple_iiwa_driver.launch">
  </include>

  <!-- Gripper stuff -->
  <node name="robotiq_s_model_interface" pkg="robotiq_s_model_control" type="SModelTcpNode.py" args="$(arg gripper_ip_address)"/>
  <node name="simple_s_model_server" pkg="simple_s_model_server" type="simple_server.py"/>

  <include file="$(find costar_bringup)/launch/robotiq_s_model_endpoint.launch">
    <param name="ee_frame" value="$(arg ee_frame)"/>
  </include>

  <!-- motion planning -->
  <include if="$(arg start_move_group)" file="$(find iiwa_moveit)/launch/move_group.launch">
    <param name="allow_trajectory_execution" value="false"/>
  </include>

  <!-- semi static transform for calibration -->
  <include if="$(arg start_semi_static)" file="$(find costar_bringup)/launch/semi_static.launch"/>

  <!-- camera stuff -->
  <include if="$(arg start_camera)" file="$(find costar_bringup)/launch/camera.launch">
  </include>

  <node pkg="predicator_detected_objects" name="predicator_detected_objects_node" type="predicator_detect_objects.py">
    <remap from="/detected_object_list" to="/SPServer/detected_object_list"/>
  </node>

</launch>
